<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Detail</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script th:src="@{/js/review/review.js}" defer></script>
</head>
<body>
<th:block th:each="img : ${productImages}">
    <img th:src="@{/images/{filename}(filename=${img.productImgSavedName})}" alt="" height="100"/>
</th:block>
<table>
    <tr>
        <th>상품아이디</th>
        <td th:text="${product.id}"></td>
    </tr>
    <tr>
        <th>날짜</th>
        <td th:text="${product.productCreateTime}"></td>
    </tr>
    <tr>
        <th>조회수</th>
        <td th:text="${product.productHits}"></td>
    </tr>
    <tr>
        <th>상품명</th>
        <td th:text="${product.productName}"></td>
    </tr>
    <tr>
        <th>상품색상</th>
        <td th:text="${product.productColor}"></td>
    </tr>
    <tr>
        <th>상품사이즈</th>
        <td th:text="${product.productSize}"></td>
    </tr>
    <tr>
        <th>설명</th>
        <td th:text="${product.productDescription}"></td>
    </tr>
    <tr>
        <th>상품작성자</th>
        <td th:text="${product.productWriter}"></td>
    </tr>
</table>
<button onclick="listReq()">목록</button>
<button onclick="updateReq()">수정</button>
<button onclick="deleteReq()">삭제</button>
<div class="review-con">

    <div class="review-write">

        <!-- 덧글 작성 -->
        <!--          <form th:action="@{/reply/write}" method="post">-->
        <!-- 게시글 번호 ** 필수 -->
        <input type="hidden" readonly name="productId"
               th:value="${product.id}" id="productId">
        <ul>
            <li>
<!--                <input type="file" name="upload_file" id="upload_file">-->
                <textarea name="review" id="review"
                          cols="30" rows="1" placeholder="내용작성"></textarea>
            </li>
            <li>
                <!--                <input type="submit" value="덧글작성">-->
                <input type="button" value="댓글작성" id="ajaxBtn">


<!--                <input type="text" value="0" id="star">-->
            </li>
        </ul>
        <!--          </form>-->
    </div>
    <div class="review-list">
        <div id="reviewCount"></div>
        <input type="hidden" th:id="prId" th:value="${product.id}">
        <!-- 덧글리스트 -->
        <div id="tData">
            <ul th:each="review : ${reviews}">
                <li th:text="${review.reviewWriter}"></li>
                <li th:text="${review.createTime}"></li>
                <li th:text="${review.review}">
                    <input type="hidden" id="upReview">
                    <textarea name="saveReview" th:id="saveReview" rows="5">${review.review}</textarea>
                </li>
                <input type="button" value="삭제" th:onclick="onDelete([[${review.id}]])">
                <input type="button" id="reviewUp" value="수정" th:onclick="onUpdate([[${review.id}]])">
            </ul>
        </div>
    </div>
</div>
</body>
<script th:inline="javascript">
    const listReq = () => {
        console.log("글목록");
        location.href = "/product/list";
    }
    const updateReq = () => {
        console.log("수정");
        const id = [[${product.id}]];
        location.href = "/product/update/" + id;
    }
    const deleteReq = () => {
        console.log("삭제");
        const id = [[${product.id}]];
        location.href = "/product/delete/" + id;
    }


</script>
</html>